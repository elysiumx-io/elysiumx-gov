import{c9 as Q,ca as O,cb as X}from"./index-gOj9jnM2.js";import{r as P,d as M}from"./index-u7y3Otc_.js";var ee=Q(),z=P(),te=new ee.ec("secp256k1"),C=class{id;masterKey;childKey;constructor(t,e,n){this.id=t,this.masterKey=typeof e=="string"?JSON.parse(e):e,this.childKey=typeof n=="string"?JSON.parse(n):n}static async gen(t,e){await h();const n=await ae(t,typeof e=="string"?e:JSON.stringify(e));return new C(n.id,n.master_key,n.child_key)}static from(t){const e=typeof t=="string"?JSON.parse(t):t;return new C(e.id,e.masterKey,e.childKey)}to(){return JSON.stringify({id:this.id,masterKey:this.masterKey,childKey:this.childKey})}pub(){const t=te.keyFromPublic({x:this.childKey.public.q.x,y:this.childKey.public.q.y});return j(t.getPublic().encodeCompressed("hex"))}async sign(t,e,n,r=!1){return await h(),this._sign(t,e,n,r)}async batchSign(t,e,n){return await h(),Promise.all(n.map(r=>this._sign(t,e,r)))}async _sign(t,e,n,r=!1){n=D(n),e=typeof e=="string"?e:JSON.stringify(e);const o=new S(this.id,"",JSON.stringify(this.childKey)),i=JSON.parse(await ge(t,e,n,o,r));return{r:j(i.r),s:j(i.s),v:i.recid}}async signTx(t,e,n){await h();const r=new S(this.id,"",JSON.stringify(this.childKey)),o=JSON.parse(await de(t,typeof e=="string"?e:JSON.stringify(e),JSON.stringify(n),r));return G(n)&&(o.v="0x"+(parseInt(o.v.substring(2),16)+(n?.chainId||1)*2+35).toString(16)),o}async signTronTx(t,e,n){await h();let r=n?.chainId||728126428;r=typeof r=="string"&&r.startsWith("0x")?parseInt(r,16):Number(r);const o=Object.keys(n).filter(l=>["from","to","value","data","gas","originEnergyLimit","name","abi","consumeUserResourcePercent","tokenId","tokenValue"].includes(l)).reduce((l,f)=>(l[f]=n[f],l),{});o?.to||(o.originEnergyLimit=o?.originEnergyLimit||1e17),o?.data?.length>2&&(o.gas=o?.gas||"0x220bd20");const i=await this.rpcRequest(t,e,r,"buildTransaction",{...o});if(!i.result)throw new $(i?.error?.code??10001,i?.error?.message??"System error","","");const s=i.result.transaction,w=await this.sign(t,e,j(s.txID));return s.signature=[w.r.toString("hex")+w.s.toString("hex")+`0${w.v}`],`0x${O.from(JSON.stringify(s)).toString("hex")}`}async rpcRequest(t,e,n,r,...o){e=typeof e=="string"?JSON.parse(e):e;const i=`${t.replace("api","rpc")}/evm-chain?chainId=${n}`,s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Basic ${O.from(`${e.project_uuid}:${e.project_client_key}`,"utf8").toString("base64")}`},body:JSON.stringify({id:+new Date,jsonrpc:"2.0",chainId:n,method:r,params:o})});if(!s.ok)throw new $(10001,"System error, request failed");return s.json()}async refresh(t,e){await h();const n=new S(this.id,JSON.stringify(this.masterKey),""),r=await be(t,typeof e=="string"?e:JSON.stringify(e),n),o=new C(r.id,r.master_key,r.child_key);return this.id=o.id,this.masterKey=o.masterKey,this.childKey=o.childKey,o}};function ne(t){const e=JSON.parse(t);if(G(e)){let n=1;return"chainId"in e&&e.chainId!==void 0&&(typeof e.chainId=="number"?n=e.chainId:n=e.chainId.startsWith("0x")?parseInt(e.chainId.substring(2),16):parseInt(e.chainId)),M.Transaction.fromTxData(e,{common:z.Common.custom({chainId:n},{hardfork:z.Hardfork.SpuriousDragon})}).getMessageToSign()}else return M.TransactionFactory.fromTxData(e).getMessageToSign()}function G(t){return!("type"in t)||t.type===void 0||t.type==="0x0"||t.type===0}var _,v=new Array(128).fill(void 0);v.push(void 0,null,!0,!1);function c(t){return v[t]}var A=v.length;function re(t){t<132||(v[t]=A,A=t)}function m(t){const e=c(t);return re(t),e}var Y=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Y.decode();var I=null;function R(){return(I===null||I.byteLength===0)&&(I=new Uint8Array(_.memory.buffer)),I}function p(t,e){return t=t>>>0,Y.decode(R().subarray(t,t+e))}function a(t){A===v.length&&v.push(v.length+1);const e=A;return A=v[e],v[e]=t,e}var g=0,L=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},_e=typeof L.encodeInto=="function"?function(t,e){return L.encodeInto(t,e)}:function(t,e){const n=L.encode(t);return e.set(n),{read:t.length,written:n.length}};function b(t,e,n){if(n===void 0){const w=L.encode(t),l=e(w.length)>>>0;return R().subarray(l,l+w.length).set(w),g=w.length,l}let r=t.length,o=e(r)>>>0;const i=R();let s=0;for(;s<r;s++){const w=t.charCodeAt(s);if(w>127)break;i[o+s]=w}if(s!==r){s!==0&&(t=t.slice(s)),o=n(o,r,r=s+t.length*3)>>>0;const w=R().subarray(o+s,o+r),l=_e(t,w);s+=l.written}return g=s,o}function W(t){return t==null}var J=null;function d(){return(J===null||J.byteLength===0)&&(J=new Int32Array(_.memory.buffer)),J}function U(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const o=t.description;return o==null?"Symbol":`Symbol(${o})`}if(e=="function"){const o=t.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(t)){const o=t.length;let i="[";o>0&&(i+=U(t[0]));for(let s=1;s<o;s++)i+=", "+U(t[s]);return i+="]",i}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(n.length>1)r=n[1];else return toString.call(t);if(r=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:r}function oe(t,e,n,r){const o={a:t,b:e,cnt:1,dtor:n},i=(...s)=>{o.cnt++;const w=o.a;o.a=0;try{return r(w,o.b,...s)}finally{--o.cnt===0?_.__wbindgen_export_2.get(o.dtor)(w,o.b):o.a=w}};return i.original=o,i}function ie(t,e,n){_._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__he561f054b64cb340(t,e,a(n))}function ce(t,e){const n=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),r=g,o=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g,s=_.eddsa_keygen(n,r,o,i);return m(s)}function q(t,e){const n=e(t.length*1)>>>0;return R().set(t,n/1),g=t.length,n}function B(t,e){if(!(t instanceof e))throw new Error(`expected instance of ${e.name}`);return t.ptr}function se(t,e,n,r){const o=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g,s=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),w=g,l=q(n,_.__wbindgen_malloc),f=g;B(r,K);var u=r.__destroy_into_raw();const k=_.eddsa_sign(o,i,s,w,l,f,u);return m(k)}function ae(t,e){const n=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),r=g,o=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g,s=_.ecdsa_keygen(n,r,o,i);return m(s)}function ge(t,e,n,r,o){const i=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),s=g,w=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),l=g,f=q(n,_.__wbindgen_malloc),u=g;B(r,S);var k=r.__destroy_into_raw();const x=_.ecdsa_sign(i,s,w,l,f,u,k,W(o)?16777215:o?1:0);return m(x)}function de(t,e,n,r){const o=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g,s=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),w=g,l=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),f=g;B(r,S);var u=r.__destroy_into_raw();const k=_.ecdsa_sign_tx(o,i,s,w,l,f,u);return m(k)}function be(t,e,n){const r=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),o=g,i=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),s=g;B(n,S);var w=n.__destroy_into_raw();const l=_.ecdsa_rotate(r,o,i,s,w);return m(l)}function we(t,e){let n,r;try{const u=_.__wbindgen_add_to_stack_pointer(-16),k=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),x=g,N=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),T=g;_.hash_password(u,k,x,N,T);var o=d()[u/4+0],i=d()[u/4+1],s=d()[u/4+2],w=d()[u/4+3],l=o,f=i;if(w)throw l=0,f=0,m(s);return n=l,r=f,p(l,f)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(n,r)}}function le(t,e){let n,r;try{const u=_.__wbindgen_add_to_stack_pointer(-16),k=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),x=g,N=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),T=g;_.encrypt(u,k,x,N,T);var o=d()[u/4+0],i=d()[u/4+1],s=d()[u/4+2],w=d()[u/4+3],l=o,f=i;if(w)throw l=0,f=0,m(s);return n=l,r=f,p(l,f)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(n,r)}}function fe(t,e){let n,r;try{const u=_.__wbindgen_add_to_stack_pointer(-16),k=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),x=g,N=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),T=g;_.decrypt(u,k,x,N,T);var o=d()[u/4+0],i=d()[u/4+1],s=d()[u/4+2],w=d()[u/4+3],l=o,f=i;if(w)throw l=0,f=0,m(s);return n=l,r=f,p(l,f)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(n,r)}}function y(t,e){try{return t.apply(this,e)}catch(n){_.__wbindgen_exn_store(a(n))}}function ue(t,e,n,r){_.wasm_bindgen__convert__closures__invoke2_mut__h47250f64619b534a(t,e,a(n),a(r))}var S=class{static __wrap(t){t=t>>>0;const e=Object.create(S.prototype);return e.__wbg_ptr=t,e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();_.__wbg_ecdsakey_free(t)}get id(){let t,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_ecdsakey_id(o,this.__wbg_ptr);var n=d()[o/4+0],r=d()[o/4+1];return t=n,e=r,p(n,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,e)}}set id(t){const e=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),n=g;_.__wbg_set_ecdsakey_id(this.__wbg_ptr,e,n)}get master_key(){let t,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_ecdsakey_master_key(o,this.__wbg_ptr);var n=d()[o/4+0],r=d()[o/4+1];return t=n,e=r,p(n,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,e)}}set master_key(t){const e=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),n=g;_.__wbg_set_ecdsakey_master_key(this.__wbg_ptr,e,n)}get child_key(){let t,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_ecdsakey_child_key(o,this.__wbg_ptr);var n=d()[o/4+0],r=d()[o/4+1];return t=n,e=r,p(n,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,e)}}set child_key(t){const e=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),n=g;_.__wbg_set_ecdsakey_child_key(this.__wbg_ptr,e,n)}constructor(t,e,n){const r=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),o=g,i=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),s=g,w=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),l=g,f=_.ecdsakey_new(r,o,i,s,w,l);return S.__wrap(f)}},K=class{static __wrap(t){t=t>>>0;const e=Object.create(K.prototype);return e.__wbg_ptr=t,e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();_.__wbg_eddsakey_free(t)}get id(){let t,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_eddsakey_id(o,this.__wbg_ptr);var n=d()[o/4+0],r=d()[o/4+1];return t=n,e=r,p(n,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,e)}}set id(t){const e=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),n=g;_.__wbg_set_eddsakey_id(this.__wbg_ptr,e,n)}get key_agg(){let t,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_eddsakey_key_agg(o,this.__wbg_ptr);var n=d()[o/4+0],r=d()[o/4+1];return t=n,e=r,p(n,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,e)}}set key_agg(t){const e=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),n=g;_.__wbg_set_eddsakey_key_agg(this.__wbg_ptr,e,n)}get key_pair(){let t,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_eddsakey_key_pair(o,this.__wbg_ptr);var n=d()[o/4+0],r=d()[o/4+1];return t=n,e=r,p(n,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,e)}}set key_pair(t){const e=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),n=g;_.__wbg_set_eddsakey_key_pair(this.__wbg_ptr,e,n)}constructor(t,e,n){const r=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),o=g,i=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),s=g,w=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),l=g,f=_.eddsakey_new(r,o,i,s,w,l);return K.__wrap(f)}},$=class{static __wrap(t){t=t>>>0;const e=Object.create($.prototype);return e.__wbg_ptr=t,e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();_.__wbg_servererror_free(t)}get error_code(){return _.__wbg_get_servererror_error_code(this.__wbg_ptr)}set error_code(t){_.__wbg_set_servererror_error_code(this.__wbg_ptr,t)}get message(){let t,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_servererror_message(o,this.__wbg_ptr);var n=d()[o/4+0],r=d()[o/4+1];return t=n,e=r,p(n,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,e)}}set message(t){const e=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),n=g;_.__wbg_set_servererror_message(this.__wbg_ptr,e,n)}get extra(){let t,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_servererror_extra(o,this.__wbg_ptr);var n=d()[o/4+0],r=d()[o/4+1];return t=n,e=r,p(n,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,e)}}set extra(t){const e=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),n=g;_.__wbg_set_servererror_extra(this.__wbg_ptr,e,n)}get path(){let t,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_servererror_path(o,this.__wbg_ptr);var n=d()[o/4+0],r=d()[o/4+1];return t=n,e=r,p(n,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,e)}}set path(t){const e=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),n=g;_.__wbg_set_servererror_path(this.__wbg_ptr,e,n)}constructor(t,e,n,r){const o=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g;var s=W(n)?0:b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),w=g,l=W(r)?0:b(r,_.__wbindgen_malloc,_.__wbindgen_realloc),f=g;const u=_.servererror_new(t,o,i,s,w,l,f);return $.__wrap(u)}};async function pe(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(r){if(t.headers.get("Content-Type")=="application/wasm")throw r}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function ye(){const t={};return t.wbg={},t.wbg.__wbindgen_object_drop_ref=function(e){m(e)},t.wbg.__wbg_servererror_new=function(e){const n=$.__wrap(e);return a(n)},t.wbg.__wbindgen_cb_drop=function(e){const n=m(e).original;return n.cnt--==1?(n.a=0,!0):!1},t.wbg.__wbindgen_string_new=function(e,n){const r=p(e,n);return a(r)},t.wbg.__wbindgen_is_undefined=function(e){return c(e)===void 0},t.wbg.__wbg_getmessagetosign_e9412d530252fd1e=function(e,n,r){const o=ne(p(n,r)),i=q(o,_.__wbindgen_malloc),s=g;d()[e/4+1]=s,d()[e/4+0]=i},t.wbg.__wbg_eddsakey_new=function(e){const n=K.__wrap(e);return a(n)},t.wbg.__wbg_ecdsakey_new=function(e){const n=S.__wrap(e);return a(n)},t.wbg.__wbindgen_string_get=function(e,n){const r=c(n),o=typeof r=="string"?r:void 0;var i=W(o)?0:b(o,_.__wbindgen_malloc,_.__wbindgen_realloc),s=g;d()[e/4+1]=s,d()[e/4+0]=i},t.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return a(e)},t.wbg.__wbg_stack_658279fe44541cf6=function(e,n){const r=c(n).stack,o=b(r,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g;d()[e/4+1]=i,d()[e/4+0]=o},t.wbg.__wbg_error_f851667af71bcfc6=function(e,n){let r,o;try{r=e,o=n}finally{_.__wbindgen_free(r,o)}},t.wbg.__wbindgen_is_string=function(e){return typeof c(e)=="string"},t.wbg.__wbindgen_object_clone_ref=function(e){const n=c(e);return a(n)},t.wbg.__wbg_instanceof_Window_c5579e140698a9dc=function(e){let n;try{n=c(e)instanceof Window}catch{n=!1}return n},t.wbg.__wbg_fetch_bb49ae9f1d79408b=function(e,n){const r=c(e).fetch(c(n));return a(r)},t.wbg.__wbg_origin_35ef5d6a71c924b6=function(e,n){const r=c(n).origin,o=b(r,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g;d()[e/4+1]=i,d()[e/4+0]=o},t.wbg.__wbg_pathname_715df8a6b71fdfd7=function(e,n){const r=c(n).pathname,o=b(r,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g;d()[e/4+1]=i,d()[e/4+0]=o},t.wbg.__wbg_search_24b39c2a5b10e06c=function(e,n){const r=c(n).search,o=b(r,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g;d()[e/4+1]=i,d()[e/4+0]=o},t.wbg.__wbg_setsearch_7aeec58875c5946b=function(e,n,r){c(e).search=p(n,r)},t.wbg.__wbg_searchParams_d5568d267828eeea=function(e){const n=c(e).searchParams;return a(n)},t.wbg.__wbg_new_f6818a0e274befa9=function(){return y(function(e,n){const r=new URL(p(e,n));return a(r)},arguments)},t.wbg.__wbg_instanceof_Response_7ade9a5a066d1a55=function(e){let n;try{n=c(e)instanceof Response}catch{n=!1}return n},t.wbg.__wbg_status_d2b2d0889f7e970f=function(e){return c(e).status},t.wbg.__wbg_ok_0a0ed9a1863d8af5=function(e){return c(e).ok},t.wbg.__wbg_text_65fa1887e8f7b4ac=function(){return y(function(e){const n=c(e).text();return a(n)},arguments)},t.wbg.__wbg_instanceof_WorkerGlobalScope_5188d176509513d4=function(e){let n;try{n=c(e)instanceof WorkerGlobalScope}catch{n=!1}return n},t.wbg.__wbg_fetch_621998933558ad27=function(e,n){const r=c(e).fetch(c(n));return a(r)},t.wbg.__wbg_url_3325e0ef088003ca=function(e,n){const r=c(n).url,o=b(r,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g;d()[e/4+1]=i,d()[e/4+0]=o},t.wbg.__wbg_newwithstr_49e8bfa3150f3210=function(){return y(function(e,n){const r=new Request(p(e,n));return a(r)},arguments)},t.wbg.__wbg_newwithstrandinit_a4cd16dfaafcf625=function(){return y(function(e,n,r){const o=new Request(p(e,n),c(r));return a(o)},arguments)},t.wbg.__wbg_new_5cb136b036dd2286=function(){return y(function(){const e=new URLSearchParams;return a(e)},arguments)},t.wbg.__wbg_append_5b8ac576a0a2c65a=function(e,n,r,o,i){c(e).append(p(n,r),p(o,i))},t.wbg.__wbg_new_143b41b4342650bb=function(){return y(function(){const e=new Headers;return a(e)},arguments)},t.wbg.__wbg_set_76353df4722f4954=function(){return y(function(e,n,r,o,i){c(e).set(p(n,r),p(o,i))},arguments)},t.wbg.__wbg_crypto_58f13aa23ffcb166=function(e){const n=c(e).crypto;return a(n)},t.wbg.__wbindgen_is_object=function(e){const n=c(e);return typeof n=="object"&&n!==null},t.wbg.__wbg_process_5b786e71d465a513=function(e){const n=c(e).process;return a(n)},t.wbg.__wbg_versions_c2ab80650590b6a2=function(e){const n=c(e).versions;return a(n)},t.wbg.__wbg_node_523d7bd03ef69fba=function(e){const n=c(e).node;return a(n)},t.wbg.__wbg_msCrypto_abcb1295e768d1f2=function(e){const n=c(e).msCrypto;return a(n)},t.wbg.__wbg_require_2784e593a4674877=function(){return y(function(){const e=module.require;return a(e)},arguments)},t.wbg.__wbindgen_is_function=function(e){return typeof c(e)=="function"},t.wbg.__wbg_getRandomValues_504510b5564925af=function(){return y(function(e,n){c(e).getRandomValues(c(n))},arguments)},t.wbg.__wbg_randomFillSync_a0d98aa11c81fe89=function(){return y(function(e,n){c(e).randomFillSync(m(n))},arguments)},t.wbg.__wbg_get_7303ed2ef026b2f5=function(e,n){const r=c(e)[n>>>0];return a(r)},t.wbg.__wbg_newnoargs_c9e6043b8ad84109=function(e,n){const r=new Function(p(e,n));return a(r)},t.wbg.__wbg_next_ec061e48a0e72a96=function(){return y(function(e){const n=c(e).next();return a(n)},arguments)},t.wbg.__wbg_done_b6abb27d42b63867=function(e){return c(e).done},t.wbg.__wbg_value_2f4ef2036bfad28e=function(e){const n=c(e).value;return a(n)},t.wbg.__wbg_get_f53c921291c381bd=function(){return y(function(e,n){const r=Reflect.get(c(e),c(n));return a(r)},arguments)},t.wbg.__wbg_call_557a2f2deacc4912=function(){return y(function(e,n){const r=c(e).call(c(n));return a(r)},arguments)},t.wbg.__wbg_new_2b6fea4ea03b1b95=function(){const e=new Object;return a(e)},t.wbg.__wbg_self_742dd6eab3e9211e=function(){return y(function(){const e=self.self;return a(e)},arguments)},t.wbg.__wbg_window_c409e731db53a0e2=function(){return y(function(){const e=window.window;return a(e)},arguments)},t.wbg.__wbg_globalThis_b70c095388441f2d=function(){return y(function(){const e=globalThis.globalThis;return a(e)},arguments)},t.wbg.__wbg_global_1c72617491ed7194=function(){return y(function(){const e=X.global;return a(e)},arguments)},t.wbg.__wbg_instanceof_Error_fac23a8832b241da=function(e){let n;try{n=c(e)instanceof Error}catch{n=!1}return n},t.wbg.__wbg_message_eab7d45ec69a2135=function(e){const n=c(e).message;return a(n)},t.wbg.__wbg_name_8e6176d4db1a502d=function(e){const n=c(e).name;return a(n)},t.wbg.__wbg_toString_506566b763774a16=function(e){const n=c(e).toString();return a(n)},t.wbg.__wbg_call_587b30eea3e09332=function(){return y(function(e,n,r){const o=c(e).call(c(n),c(r));return a(o)},arguments)},t.wbg.__wbg_entries_039ff76b77e573c1=function(e){const n=c(e).entries();return a(n)},t.wbg.__wbg_now_c857fb0367c762cc=function(){return Date.now()},t.wbg.__wbg_toString_e2b23ac99490a381=function(e){const n=c(e).toString();return a(n)},t.wbg.__wbg_new_2b55e405e4af4986=function(e,n){try{var r={a:e,b:n},o=(s,w)=>{const l=r.a;r.a=0;try{return ue(l,r.b,s,w)}finally{r.a=l}};const i=new Promise(o);return a(i)}finally{r.a=r.b=0}},t.wbg.__wbg_resolve_ae38ad63c43ff98b=function(e){const n=Promise.resolve(c(e));return a(n)},t.wbg.__wbg_then_8df675b8bb5d5e3c=function(e,n){const r=c(e).then(c(n));return a(r)},t.wbg.__wbg_then_835b073a479138e5=function(e,n,r){const o=c(e).then(c(n),c(r));return a(o)},t.wbg.__wbg_buffer_55ba7a6b1b92e2ac=function(e){const n=c(e).buffer;return a(n)},t.wbg.__wbg_newwithbyteoffsetandlength_88d1d8be5df94b9b=function(e,n,r){const o=new Uint8Array(c(e),n>>>0,r>>>0);return a(o)},t.wbg.__wbg_new_09938a7d020f049b=function(e){const n=new Uint8Array(c(e));return a(n)},t.wbg.__wbg_set_3698e3ca519b3c3c=function(e,n,r){c(e).set(c(n),r>>>0)},t.wbg.__wbg_newwithlength_89eeca401d8918c2=function(e){const n=new Uint8Array(e>>>0);return a(n)},t.wbg.__wbg_subarray_d82be056deb4ad27=function(e,n,r){const o=c(e).subarray(n>>>0,r>>>0);return a(o)},t.wbg.__wbg_set_07da13cc24b69217=function(){return y(function(e,n,r){return Reflect.set(c(e),c(n),c(r))},arguments)},t.wbg.__wbindgen_debug_string=function(e,n){const r=U(c(n)),o=b(r,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g;d()[e/4+1]=i,d()[e/4+0]=o},t.wbg.__wbindgen_throw=function(e,n){throw new Error(p(e,n))},t.wbg.__wbindgen_memory=function(){const e=_.memory;return a(e)},t.wbg.__wbindgen_closure_wrapper734=function(e,n,r){const o=oe(e,n,222,ie);return a(o)},t}function he(t,e){return _=t.exports,Z.__wbindgen_wasm_module=e,J=null,I=null,_.__wbindgen_start(),_}async function Z(t){if(_!==void 0)return _;typeof t>"u"&&(t=new URL("/assets/thresh_sig_wasm_bg-CTkD8zdB.wasm",import.meta.url));const e=ye();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await pe(await t,e);return he(n,r)}var me=Z,D=t=>O.isBuffer(t)?t:t instanceof Uint8Array?O.from(t.buffer,t.byteOffset,t.byteLength):O.from(t),j=t=>{for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return D(e)},ke=t=>{if(t.length<1)return t;let e=t.length-1,n=0;for(let r=0;r<t.length/2;r++)n=t[r],t[r]=t[e],t[e]=n,e--;return t};async function ve(t){return new Promise(e=>setTimeout(e,t))}async function xe(t,e){return await h(),we(t,e)}async function Ne(t,e){return await h(),le(t,e)}async function Te(t,e){return await h(),fe(t,e)}var F=32,V=32,H=class{id;keyAgg;keyPair;constructor(t,e,n){this.id=t,this.keyAgg=typeof e=="string"?JSON.parse(e):e,this.keyPair=typeof n=="string"?JSON.parse(n):n}static async gen(t,e){await h();const n=await ce(t,typeof e=="string"?e:JSON.stringify(e));return new H(n.id,n.key_agg,n.key_pair)}static from(t){const e=typeof t=="string"?JSON.parse(t):t;return new H(e.id,e.keyAgg,e.keyPair)}to(){return JSON.stringify({id:this.id,keyAgg:this.keyAgg,keyPair:this.keyPair})}pub(){return j(this.keyAgg.apk.bytes_str)}async sign(t,e,n){return await h(),this._sign(t,e,n)}async batchSign(t,e,n){return await h(),Promise.all(n.map(r=>this._sign(t,e,r)))}async _sign(t,e,n){const r=new K(this.id,JSON.stringify(this.keyAgg),JSON.stringify(this.keyPair)),o=JSON.parse(await se(t,typeof e=="string"?e:JSON.stringify(e),D(n),r)),i=O.from(o.R.bytes_str.padStart(V*2,"0"),"hex"),s=O.from(o.s.padStart(F*2,"0"),"hex"),w=ke(s);return O.concat([i,w],V+F)}},E={initializing:!1,initialized:!1};async function h(){for(;E.initializing;)await ve(10);if(!E.initialized){E.initializing=!0;try{await me(),E.initialized=!0}catch{}E.initializing=!1}}function Ee(){return"0.7.8"}export{C as Ecdsa,H as EdDsa,$ as ServerError,Te as decryptData,Ne as encryptData,xe as generateKey,Ee as getVersion,ne as get_message_to_sign,h as initWasm};
