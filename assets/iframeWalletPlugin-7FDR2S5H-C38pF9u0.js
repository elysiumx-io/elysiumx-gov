import{bn as y,bo as m,ay as h,bg as E,Y as A,r as f,a4 as C,bp as w,bq as g}from"./index-gOj9jnM2.js";var b=()=>{let{provider:a}=y(),{wallet:o}=m(),{modalOptions:e}=h(),{connected:v}=E(),{walletEntryPlugin:t}=A(),r=f.useCallback(async i=>{var u,c,p,n,s;if(i==="open-account-and-security")(c=(u=window.particle)==null?void 0:u._internal)==null||c.openAccountAndSecurity();else if(i==="get-user-info")return(s=(n=(p=window.particle)==null?void 0:p._internal)==null?void 0:n.getUserInfo)==null?void 0:s.call(n)},[]);return f.useEffect(()=>{var i,u,c;if(e.wallet!==!1&&t){let p={...e.wallet,erc4337:e.erc4337,language:e.language,customStyle:{...e.customStyle,supportChains:(i=e.chains)==null?void 0:i.map(l=>{var d;return{id:l.id,name:l.name,chainType:((d=l?.custom)==null?void 0:d.chainType)||"evm"}})}};t.init({projectId:e.projectId,clientKey:e.clientKey,appId:e.appId},p);let n=()=>{t.setWalletCore({ethereum:a,solana:o,customEventHandler:r}),t.walletEntryCreate()},s=()=>{t.walletEntryDestroy()};return typeof window<"u"&&((u=window.particleAuth)==null||u.on(w.ParticleAuthDisconnect,s),(c=window.particleAuth)==null||c.on(w.ParticleAuthConnect,n)),g()&&(t.setWalletCore({ethereum:a,solana:o,customEventHandler:r}),t.walletEntryCreate()),()=>{var l,d;typeof window<"u"&&((l=window.particleAuth)==null||l.off(w.ParticleAuthDisconnect,s),(d=window.particleAuth)==null||d.off(w.ParticleAuthConnect,n))}}},[e,a,o,r,t]),f.useEffect(()=>{v&&e.wallet!==!1&&t&&t.setWalletCore({ethereum:a,solana:o,customEventHandler:r})},[v,a,o,e.wallet,r,t]),C.createElement("div",{id:"auth-core-modal-wallet-plugin",style:{display:"none"}},"Wallet Plugin")},I=b;export{I as default};
